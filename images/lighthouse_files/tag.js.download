!function(a){if(!a._CTZG||!a._CTZG.bootloader){a._CTZG=a._CTZG||{},a._CTZG.bootloader=a._CTZG.bootloader||{},a._CTZG.bootloader.version=a._CTZG.bootloader.version||"0.0.106",a._CTZG.isDebugMode=/CTI_FORCE_DEBUG=true/.test(a.document.cookie),a.CTI_FORCE_DEBUG=function(t){a.document.cookie="CTI_FORCE_DEBUG="+t,a.location.reload()},a.CTZ_BAC_FORCE_SESSION_CONFIG=function(t){a.document.cookie="CTZ_BAC_FORCE_SESSION_CONFIG="+t,a.location.reload()},a.CTZ_FORCE_WIDGET=function(t){var e=(e=c("CTZ_FORCE_WIDGET")||"").length?e+","+t:t;a.document.cookie="CTZ_FORCE_WIDGET="+e,a.location.reload()};var o,t,e,n=(o=!1,function(){var t,e;o||(o=!0,(e=i(t=p("icc"),["Bootloader","scripts","main"],null)||i(t,["bootloader","scripts","main"],null)||["cs"])&&!Array.isArray(e)&&(e=[e]),c("CTZ_FORCE_WIDGET")&&i(t,["widget_container"],!1)&&e.push("widget_container"),e.forEach(function(t){w(t,function(t){})}))});a._ctrequire=function(e,t){if(!t)return u("[CTZ] Module '"+e+"' not loaded. Provide callback to load async from mappings.");try{var o=p("icc"),n=p("tagData"),r=i(o,["Bootloader","scripts","mappings"],null)||o.bootloader.scripts.mappings,n=n.hostName,r=r[e];if(!r)throw new Error("No mapping found");o=i(o,["bootloader","assessment"],!1)||i(o,["Bootloader","assessment"],!1);if("cs"===e&&o)return l("[CTZ] Module '"+e+"' not loaded due to assessment: true.");o=a.document.createElement("script");/^https?:\/\/.*/.test(r)?o.src=r:("www.clicktripz.com"===n&&(n="static.clicktripz.com"),0===n.indexOf("compare.")&&(n=n.replace("compare","compare-static")),o.src="https://"+n+"/clib/"+e+"/"+r+".js"),o.setAttribute("data-ctz-script-type",e),o.type="text/javascript",o.async=!0,o.onload=function(){try{t(_ctrequire(e)),l("[CTZ] Successfully loaded module :: "+e)}catch(t){u("[CTZ] Exception thrown from running '"+e+"' module.",t)}},(a.document.body||a.document.getElementsByTagName("head")[0]).appendChild(o)}catch(t){u("[CTZ] Unable to load module :: "+e+" :: "+t)}};try{O(),a._CTZ&&(a._CTZ_RELOAD=(t=f(),e=!1,function(){try{t||e||f()&&(O(),e=!0)}catch(t){u("[CTZ] Bootloader Error :: "+err)}}))}catch(t){u("[CTZ] Bootloader Error :: "+t)}1===a.document.getElementsByClassName("mocha-init").length&&(a._ctBootloaderSpec={_get:i,coerceBoolean:s,consoleLog:l,consoleError:u,getCookieVal:c,setGlobal:d,getGlobal:p,request:r,ensureUserConsent:f,getTag:m,getTagData:h,determineConstrainUrl:C,callConstrain:b,callConstrainWithCookieSync:T,callConstrainWithoutCookieSync:g,ensureConstrains:_,callIcc:E,userOptedOut:y,loadMainOnce:n,ensureLoadForInteractionEvents:v,ensureLoadForConfiguration:Z,ensureModule:w,boot:O})}function i(t,e,o){var n=t;if("string"==typeof e&&(e=e.split(".")),!Array.isArray(e))throw new Error("invalid path argument");for(var r=0;r<e.length;r++){if(e.length-r==1&&void 0!==n[e[r]])return n[e[r]];if("object"!=typeof n[e[r]])break;n=n[e[r]]}return o}function s(t){switch(typeof t){case"string":return{true:!0,false:!1}[t];case"boolean":return t;default:return Boolean(t)}}function l(){a._CTZG.isDebugMode&&console.log.apply(null,arguments)}function u(){a._CTZG.isDebugMode&&console.error.apply(null,arguments)}function c(t){t=document.cookie.match("(^|;)\\s*"+t+"\\s*=\\s*([^;]+)");return t?t.pop():void 0}function d(t,e){a._CTZG.bootloader[t]=e}function p(t){return a._CTZG.bootloader[t]}function r(t,e,o,n){var r=new(a.XMLHttpRequest||a.ActiveXObject)("MSXML2.XMLHTTP.3.0");r.withCredentials=e.withCredentials,r.onload=function(){var t=r.response;"json"===e.responseType&&(t=a.JSON.parse(r.response)),o(t)},r.open(t,e.url,1),r.onreadystatechange=function(t){4===r.readyState&&200!==r.status&&n&&n()},r.send(e.payload)}function f(){var t=i(a,"_CTZ.consent",null)||i(a,"_CTZS.consent",null),e=!0;return t&&(e=t.hasOwnProperty("allowed")?s(t.allowed):(l("[CTZ] Consent object present but missing properties :: defaulting to false"),!1)),e}function m(){return[a.document.querySelectorAll("script[src*='//static.clicktripz.com/tag.js']"),a.document.querySelectorAll("script[src*='//compare-static'][src*='/tag.js']"),a.document.querySelectorAll("script[src*='//localhost:8089/tag.js']"),a.document.querySelectorAll("script[src*='//static.clicktripz.com/r/ucb.js']"),a.document.querySelectorAll("script[src*='//compare-static'][src*='/ucb.js']"),a.document.querySelectorAll("script[src*='//localhost:8088/r/ucb.js']"),a.document.querySelectorAll("script[src*='//localhost:8089/r/ucb.js']"),a.document.querySelectorAll("script[src*='//localhost:8089/r/ucb.src.js']")].reduce(function(t,e){if(e.length<1)return t;for(var o=[],n=0;n<e.length;n++)(e[n].getAttribute("data-alias")||e[n].getAttribute("data-publisher"))&&o.push(e[n]);return o.length<1||t.push(o[0]),t},[])[0]}function h(t){var e=t.src.match(/compare-static\.[a-z0-9]*(\.[a-z][a-z][a-z]?){1,2}/),e=e?e[0]:"static.clicktripz.com",e=/compare-static/.test(e)?e.replace("compare-static","compare"):"www.clicktripz.com";return{hostName:e,publisherAlias:t.getAttribute("data-alias")||null,publisherHash:t.getAttribute("data-publisher")||null,fpcsEnabled:!/clicktripz\.com/.test(e)}}function C(t,e){var o=t.fpcsEnabled&&!e,n=c("_ctpuid"),r="https://"+t.hostName+"/api/integrations/v1/constrain",e="?";if(null!==t.publisherAlias)e+="publisherAlias="+t.publisherAlias;else{if(null===t.publisherHash)return void u(new Error("Unable to determine constrainURL :: no publisher identifier"));e+="h="+t.publisherHash}if(void 0!==n&&(e+="&cpid="+n),o){_CTZG.bootloader.useFPCSCookieSync=!0;o=r+e;return o+="&u="+a.location.href,"https://www.clicktripz.com/api/integrations/v1/constrain"+e+"&r="+encodeURIComponent(o)}return r+e+"&u="+a.location.href}function b(t,e,o){r("GET",{url:t,responseType:"json",withCredentials:!0},e,o)}function T(t,e){var o,n;o=function(){constrainURL=C(t,!1),d("adblockIsEnabled",!1),b(constrainURL,function(t){e(t)})},n=function(){constrainURL=C(t,!0),d("adblockIsEnabled",!0),b(constrainURL,function(t){e(t)})},b("https://www.clicktripz.com/api/integrations/v1/constrain",o,n)}function g(t,e){b(C(t),function(t){e(t)})}function _(t,e){t.fpcsEnabled?T(t,function(t){e(t)}):g(t,function(t){e(t)})}function E(t,e){r("POST",{url:"https://"+t.hostName+"/n2/c/v0/a/"+(i(p("constrain"),"data.PublisherMetadataModule.publisherAlias",!1)||t.publisherAlias||t.publisherHash),responseType:"json",withCredentials:!0,payload:JSON.stringify({ClientContext:{userAgent:a.navigator.userAgent,locationPath:a.location.pathname,locationSearch:a.location.search,documentCookie:a.document.cookie},protocol:"1"})},function(t){e(t)},function(){u("[CTZ] boot sequence terminated: ICC request failure")})}function y(t){return i(t,["data","userOptedOut"],!1)}function v(r){function c(t){n(),t.currentTarget.removeEventListener(t.type,c)}(r.interactionElements||[]).forEach(function(t){var e,o,n=a.document.querySelector(t);s(n)?(e=n,n=r.interactionEvents,o=c,n.forEach(function(t){e.addEventListener(t,o)})):u("Element: "+t+" not found for ensureLoadForInteractionEvents.")})}function Z(t){var e=t.loadOnAny,t=e.filter(function(t){return t.hasOwnProperty("timeout")}),e=e.filter(function(t){return t.hasOwnProperty("interactionElements")&&t.hasOwnProperty("interactionEvents")});t.length||e.length?(v(e[0]),(t=t[0])&&setTimeout(function(){n()},t.timeout||0)):n()}function w(t,e){return _ctrequire(t,e)}function O(){var c;f()?(d("tagData",c=h(m())),_(c,function(t){var e,o,n,r;d("constrain",t),n=i(e=t,"data.dmn"),r=i(e,"data.cpid"),(e=/(_ctpuid.*?);/.exec(document.cookie))&&1<e.length&&(o=e[1].split("=")[1]),n&&r!==o&&(document.cookie="_ctpuid="+r+';expires="Fri, 31 Dec 9999 23:59:59 GMT;domain='+n+";path=/;"),y(t)?l("[CTZ] boot sequence terminated: userOptedOut != false"):E(c,function(t){d("icc",t),d("ensureModule",w),t.Bootloader||t.bootloader?Z(t.Bootloader||t.bootloader):l("[CTZ boot sequence terminated: icc.Bootloader is not defined")})})):l("[CTZ] boot sequence terminated: consent.allowed != true")}}(window);